---
// src/pages/index.astro
import Layout from '@/layouts/Layout.astro';
import Hero from '@/components/hero.astro';
---

<Layout>
  <Hero
    title="Museo Etnológico de Almodóvar del Río"
    subtitle="Descubre la riqueza cultural y la historia de nuestra tierra"
    image="/images/hero-bg.jpg"
  />

  <section id="sobre" class="sobre fadein">
    <h2>Sobre el museo</h2>
    <p>
      El Museo Etnológico de Almodóvar del Río es un espacio dedicado a preservar y difundir la memoria, las tradiciones y la vida cotidiana de nuestro pueblo y su entorno. Descubre herramientas, objetos, fotografías y relatos que te transportarán a otra época.
    </p>
  </section>

  <section id="coleccion" class="coleccion fadein">
    <h2>Colección destacada</h2>
    <div class="coleccion__grid">
      <div class="card">
        <img src="/images/card1.jpg" alt="Arado antiguo" />
        <h3>Arado antiguo</h3>
        <p>Herramienta agrícola tradicional utilizada en el campo cordobés.</p>
      </div>
      <div class="card">
        <img src="/images/card2.jpg" alt="Vasija de barro" />
        <h3>Vasija de barro</h3>
        <p>Ejemplo de la alfarería local, pieza clave en la vida cotidiana rural.</p>
      </div>
      <div class="card">
        <img src="/images/card3.jpg" alt="Fotografía histórica" />
        <h3>Fotografía histórica</h3>
        <p>Instantánea de una fiesta popular de principios del siglo XX.</p>
      </div>
    </div>
  </section>

  <section id="exposiciones" class="sobre fadein">
    <h2>Exposiciones</h2>
    <p>
      Consulta nuestras exposiciones permanentes y temporales, con detalles de cada muestra, fechas y actividades asociadas. Muy pronto, toda la información estará disponible aquí.
    </p>
  </section>

  <section id="actividades" class="sobre fadein">
    <h2>Actividades</h2>
    <p>
      Talleres, visitas guiadas, charlas y eventos para todas las edades. Descubre la programación cultural y educativa del museo.
    </p>
  </section>

  <section id="visitanos" class="visitanos fadein">
    <h2>Visítanos</h2>
    <p>
      <strong>Dirección:</strong> CC-431, 14720 Almodóvar del Río, Córdoba<br />
      <strong>Horario:</strong> Lunes a domingo: 10:30 - 20:00
    </p>
    <div class="visitanos__mapa">
      <iframe title="Mapa Museo Etnológico de Almodóvar del Río" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3156.641123456789!2d-5.0078649!3d37.8158512!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd6d2ba4d429df33%3A0x72146820629fafae!2sMuseo%20Etnol%C3%B3gico%20de%20Almod%C3%B3var%20del%20R%C3%ADo!5e0!3m2!1ses!2ses!4v1720897382938!5m2!1ses!2ses" width="100%" height="250" style="border:0; border-radius: 12px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
  </section>

  <section id="contacto" class="fadein bg-white">
    <div class="max-w-4xl mx-auto text-center">
      <h2>Contacto</h2>
      <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
        ¿Tienes dudas, sugerencias o quieres concertar una visita? Estamos aquí para ayudarte.
      </p>
      
      <div class="grid md:grid-cols-2 gap-8 text-left max-w-4xl mx-auto">
        <div class="bg-gray-50 p-6 rounded-lg">
          <h3 class="text-xl font-semibold mb-4">Información de contacto</h3>
          <ul class="space-y-4">
            <li class="flex items-start">
              <svg class="w-6 h-6 text-primary mr-3 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
              </svg>
              <div>
                <h4 class="font-medium">Correo electrónico</h4>
                <a href="mailto:info@museoetnologico.es" class="text-primary hover:underline">info@museoetnologico.es</a>
              </div>
            </li>
            <li class="flex items-start">
              <svg class="w-6 h-6 text-primary mr-3 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
              </svg>
              <div>
                <h4 class="font-medium">Teléfono</h4>
                <a href="tel:+34950000000" class="text-primary hover:underline">950 00 00 00</a>
              </div>
            </li>
            <li class="flex items-start">
              <svg class="w-6 h-6 text-primary mr-3 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
              <div>
                <h4 class="font-medium">Dirección</h4>
                <p>Calle del Museo, 123<br>14710 Almodóvar del Río, Córdoba</p>
              </div>
            </li>
          </ul>
        </div>
        
        <div class="bg-gray-50 p-6 rounded-lg">
          <h3 class="text-xl font-semibold mb-4">Horario de apertura</h3>
          <ul class="space-y-3">
            <li class="flex justify-between">
              <span class="text-gray-600">Lunes:</span>
              <span>Cerrado</span>
            </li>
            <li class="flex justify-between">
              <span class="text-gray-600">Martes a Viernes:</span>
              <span>10:00 - 14:00 / 16:00 - 19:00</span>
            </li>
            <li class="flex justify-between">
              <span class="text-gray-600">Sábados:</span>
              <span>10:00 - 14:00</span>
            </li>
            <li class="flex justify-between">
              <span class="text-gray-600">Domingos y festivos:</span>
              <span>10:00 - 14:00</span>
            </li>
          </ul>
          <div class="mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400">
            <p class="text-sm text-yellow-700">
              <strong>Nota:</strong> Los horarios pueden variar en días festivos. Se recomienda llamar para confirmar.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Sección de Reseñas de Google -->
  <section id="reseñas" class="fadein">
    <h2>Lo que dicen nuestros visitantes</h2>
    <div class="reseñas-grid">
      <!-- Reseña 1 -->
      <div class="reseña-card">
        <div class="reseña-header">
          <div class="reseña-avatar">
            <span>MG</span>
          </div>
          <div class="reseña-info">
            <h4>María G.</h4>
            <div class="estrellas">★★★★★</div>
          </div>
        </div>
        <p class="reseña-texto">Un museo increíble que muestra la auténtica esencia de la región. Las exposiciones son muy interesantes y el personal es muy amable. ¡Volveré!</p>
      </div>

      <!-- Reseña 2 -->
      <div class="reseña-card">
        <div class="reseña-header">
          <div class="reseña-avatar">
            <span>CM</span>
          </div>
          <div class="reseña-info">
            <h4>Carlos M.</h4>
            <div class="estrellas">★★★★★</div>
          </div>
        </div>
        <p class="reseña-texto">Me encantó la colección de herramientas antiguas. Es fascinante ver cómo vivía la gente en el pasado. Muy recomendable para toda la familia.</p>
      </div>

      <!-- Reseña 3 -->
      <div class="reseña-card">
        <div class="reseña-header">
          <div class="reseña-avatar">
            <span>AL</span>
          </div>
          <div class="reseña-info">
            <h4>Ana L.</h4>
            <div class="estrellas">★★★★☆</div>
          </div>
        </div>
        <p class="reseña-texto">Un lugar con mucho encanto. Las explicaciones son claras y las instalaciones están muy cuidadas. Solo me habría gustado que hubiera más actividades interactivas.</p>
      </div>
    </div>
    
    <!-- Botón para dejar reseña en Google -->
    <div class="text-center">
      <p class="mb-4 text-gray-600">¿Ya nos has visitado? ¡Nos encantaría saber tu opinión!</p>
      <a href="https://search.google.com/local/writereview?placeid=TU_ID_DE_GOOGLE_MY_BUSINESS" 
         target="_blank" 
         rel="noopener noreferrer"
         class="boton-reseña">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="mr-2">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/>
        </svg>
        Escribe una reseña en Google
      </a>
      <p class="mt-3 text-sm text-gray-500">Tu opinión ayuda a otros a descubrir nuestro museo</p>
    </div>
    </div>
  </section>
</Layout>

<script>
if (typeof window !== 'undefined') {
  document.addEventListener('DOMContentLoaded', () => {
    // Efecto de header al hacer scroll
    const header = document.querySelector<HTMLElement>('.header');
    if (!header) throw new Error('Header element not found');
    let lastScroll = 0;

    window.addEventListener('scroll', () => {
      const currentScroll = window.pageYOffset;
      
      // Añadir clase 'scrolled' al header cuando se hace scroll
      if (currentScroll > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
      
      // Ocultar/mostrar header al hacer scroll
      if (currentScroll <= 0) {
        header.style.transform = 'translateY(0)';
        return;
      }
      
      if (currentScroll > lastScroll && currentScroll > 100) {
        // Scroll hacia abajo
        header.style.transform = 'translateY(-100%)';
      } else {
        // Scroll hacia arriba
        header.style.transform = 'translateY(0)';
      }
      
      lastScroll = currentScroll;
    });

    // Cerrar menú móvil al hacer clic en un enlace
    const navLinks = document.querySelectorAll('.header__nav a');
    const navToggle = document.getElementById('nav-toggle') as HTMLInputElement;
    
    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        if (navToggle.checked) {
          navToggle.checked = false;
        }
      });
    });

    // Scroll suave para enlaces internos
    document.querySelectorAll<HTMLAnchorElement>('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        const href = this.getAttribute('href');
        if (!href || href === '#' || href === '') return;
        
        // Escapar caracteres especiales en el ID
        const id = href.substring(1); // Eliminar el #
        if (!id) return;
        
        const target = document.getElementById(id) || document.querySelector(`[name="${id}"]`);
        if (target) {
          e.preventDefault();
          const headerOffset = 80;
          const elementPosition = target.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });
        }
      });
    });

    // Fade-in animado para secciones
    const observer = new window.IntersectionObserver(
      (entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      },
      { threshold: 0.15 }
    );
    document.querySelectorAll('.fadein').forEach(el => {
      observer.observe(el);
    });
  });
}
</script>